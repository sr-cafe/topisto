{"version":3,"sources":["../../src/core/file.es6"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;IAAY;;;;;;;;AAEZ,IAAI,iBAAiB,gBAAE,KAAF,CAAQ,UAAS,KAAT,EAAgB,IAAhB,EAAsB,KAAtB,EAA6B,KAA7B,EAAmC;AAC/D,QAAO,kBAAQ,aAAR,CAAsB,KAAtB,EAA6B,IAA7B,EAAmC,KAAnC,EAA0C,KAA1C,CAAP,CAD+D;CAAnC,CAAzB;;AAKJ,IAAI,gBAAgB,SAAhB,aAAgB,CAAS,IAAT,EAAc;AACjC,QAAO,SAAS,IAAT,CAD0B;CAAd;;IAIC;AACpB,UADoB,IACpB,CAAY,OAAZ,EAAqB,IAArB,EAA2B,MAA3B,EAAkC;wBADd,MACc;;AACjC,OAAK,OAAL,GAAe,OAAf,CADiC;AAEjC,OAAK,IAAL,GAAY,IAAZ,CAFiC;AAGjC,OAAK,MAAL,GAAc,MAAd,CAHiC;;AAKjC,OAAK,IAAL,GAAY,KAAK,OAAL,EAAZ,CALiC;EAAlC;;cADoB;;4BASX;AACR,OAAI,YAAY,eAAK,OAAL,CAAa,KAAK,IAAL,CAAzB,CADI;AAER,UAAO,SAAS,uBAAT,CAAiC,SAAjC,CAAP,CAFQ;;;;6BAKC;AACT,UAAO,SAAS,yBAAT,CAAmC,KAAK,IAAL,CAA1C,CADS;;;;0BAIH;AACN,QAAK,WAAL,GAAmB,KAAK,OAAL,CAAa,KAAb,CAAmB,IAAnB,EACjB,GADiB,CACb,eAAe,KAAK,QAAL,EAAf,CADa,EAEjB,MAFiB,CAEV,aAFU,EAGjB,GAHiB,CAGb,UAAS,OAAT,EAAiB;AACrB,WAAO,qBAAW,gBAAX,CAA4B,OAA5B,CAAP,CADqB;IAAjB,CAHa,CAMjB,MANiB,CAMV,aANU,CAAnB,CADM;;AASN,UAAO,IAAP,CATM;;;;6BAYG;AACT,UAAO,KAAK,IAAL,CADE;;;;QA9BU","file":"file.js","sourcesContent":["import path from 'path';\nimport R from 'ramda';\nimport Comment from './comment';\nimport Annotation from './annotation';\nimport * as PATTERNS from './patterns';\n\nlet commentsMapper = R.curry(function(rules, line, index, array){\n\treturn Comment.createComment(rules, line, index, array);\n});\n\n\nlet notNullFilter = function(item){\n\treturn item !== null;\n};\n\nexport default class File{\n\tconstructor(content, name, folder){\n\t\tthis.content = content;\n\t\tthis.name = name;\n\t\tthis.folder = folder;\n\n\t\tthis.type = this.getType();\n\t}\n\n\tgetType(){\n\t\tlet extension = path.extname(this.name);\n\t\treturn PATTERNS.getFileTypeForExtension(extension);\n\t}\n\n\tgetRules(){\n\t\treturn PATTERNS.getCommentPatternsForType(this.type);\n\t}\n\n\tparse(){\n\t\tthis.annotations = this.content.split('\\n')\n\t\t\t.map(commentsMapper(this.getRules()))\n\t\t\t.filter(notNullFilter)\n\t\t\t.map(function(comment){\n\t\t\t\treturn Annotation.createAnnotation(comment);\n\t\t\t})\n\t\t\t.filter(notNullFilter);\n\n\t\treturn this;\n\t}\n\n\ttoString(){\n\t\treturn this.path;\n\t}\n}\n"]}